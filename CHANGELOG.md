# 변경 이력

## [2025-11-12] - 브라우저 호환 PDF 처리로 전환

### 수정된 내용
- ❌ `pdf-parse` 제거 (Node.js 전용, 브라우저 미지원)
- ✅ `pdfjs-dist` 사용 (브라우저 호환)
- 📄 PDF에서 정확한 페이지 번호 추출
- 🚀 PDF 객체 캐싱으로 성능 향상

### 기술적 변경
- `extractTextFromPDF`: PDF.js API 사용
- `searchRelevantContent`: 페이지별 검색 및 정확한 페이지 번호 추적
- `getPdf`: PDF 객체 캐싱

---

## [2025-11-12] - PDF 참조 출처 표기 기능 추가

### 추가된 기능
- 📚 **출처 및 참조 페이지 자동 표기**
  - book.pdf 참조 시 콘텐츠 하단에 자동으로 출처 표시
  - "출처: 노윤우 박사" 명시
  - 참조한 페이지 번호 자동 추적 및 표시 (예: 12, 15, 23p)
  
### 수정된 파일
- `services/pdfService.ts`: 페이지 번호 추적 기능 추가
- `services/geminiService.ts`: 출처 표기 프롬프트 추가
- `README.md`: 출처 표기 기능 설명 추가

### 작동 방식
1. 탈모 관련 주제 감지
2. book.pdf에서 관련 내용 검색 시 페이지 번호도 함께 추출
3. AI가 콘텐츠 하단에 다음 형식으로 출처 표기:

```
📚 참고 자료
출처: 노윤우 박사
참조 페이지: 12, 15, 23p
```

### 디자인
- 테마 컬러와 일관된 스타일 적용
- 정보 박스 형태로 시각적 구분
- 왼쪽 보더로 강조 효과

---

## [2025-11-12] - 전문 자료 통합 기능

### 추가된 기능
- 📖 탈모 관련 주제 자동 감지
- 📄 book.pdf 전문 자료 우선 참조
- 🔍 키워드 기반 관련 내용 검색
- 💾 PDF 캐싱으로 성능 최적화

### 지원 키워드
탈모, 모발, 두피, 헤어, 피나스테리드, 두타스테리드, 미녹시딜, 프로페시아, 아보다트, 모발 이식, M자 탈모, 원형 탈모, 지루성 탈모 등

