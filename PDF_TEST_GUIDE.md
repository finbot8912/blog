# PDF 참조 기능 테스트 가이드

## 🧪 테스트 방법

### 1. 기본 테스트

1. 브라우저에서 `http://localhost:3000` 접속
2. 개발자 도구 콘솔 열기 (F12)
3. 탈모 관련 주제 입력 (예시 아래 참고)
4. 파란색 알림 확인
5. 포스트 생성 버튼 클릭
6. 콘솔에서 PDF 처리 로그 확인

### 2. 테스트용 주제 예시

#### ✅ 탈모 관련 주제 (PDF 참조됨)
```
미녹시딜 효과와 부작용
피나스테리드 사용 방법
M자 탈모 치료법
탈모 예방을 위한 두피 관리
모발 이식 수술 과정
```

#### ❌ 일반 주제 (PDF 참조 안됨)
```
프로그래밍 입문 가이드
맛있는 파스타 레시피
여행 필수품 리스트
```

---

## 📊 콘솔 로그 확인

### 정상 작동 시 표시되는 로그

```
탈모 관련 주제 감지됨. book.pdf에서 관련 정보를 검색합니다...
[PDF 검색 시작] 주제: "미녹시딜 효과와 부작용"
[키워드 추출] 미녹시딜, 효과, 부작용
[확장 키워드] 미녹시딜, 효과, 부작용, 탈모, 모발, 두피, 치료, 약물
[PDF 로드 완료] 총 X 페이지
[페이지 1] 매칭 점수: 5
[페이지 3] 매칭 점수: 12
[페이지 7] 매칭 점수: 8
[검색 완료] 관련 페이지 3개 발견
[최종 결과] 텍스트 길이: 2543자, 참조 페이지: 1, 3, 7
PDF에서 2543자의 관련 내용을 추출했습니다. (참조 페이지: 1, 3, 7)
```

### 오류 발생 시

#### PDF 파일을 찾을 수 없는 경우
```
[PDF 검색 오류] Error: Failed to load PDF
```
**해결**: `public/book.pdf` 파일이 존재하는지 확인

#### PDF 내용이 없는 경우
```
[경고] 관련 내용을 찾지 못했습니다. 전체 PDF에서 샘플 추출합니다.
```
**원인**: 키워드가 PDF 내용과 매칭되지 않음

---

## ✅ 생성 결과 확인

### 1. 콘텐츠 하단에 출처 표기 확인

생성된 블로그 포스트 맨 아래에 다음과 같은 박스가 있어야 합니다:

```
📚 참고 자료
출처: 노윤우 박사
참조 페이지: 1, 3, 7p
```

### 2. 내용 검증

- PDF에 있는 구체적인 약물명, 수치, 효과가 언급되었는지 확인
- 일반적인 AI 지식과 다른 전문적인 내용이 포함되었는지 확인

---

## 🔧 문제 해결

### 문제 1: PDF가 로드되지 않음

**증상**: 
```
[PDF 검색 오류] Failed to load PDF
```

**해결 방법**:
1. `public/book.pdf` 파일 존재 확인
2. 파일 권한 확인
3. 브라우저 캐시 삭제 후 새로고침 (Ctrl+Shift+R)

### 문제 2: PDF 내용이 추출되지 않음

**증상**:
```
[최종 결과] 텍스트 길이: 0자
```

**해결 방법**:
1. PDF가 텍스트 기반인지 확인 (이미지 PDF는 추출 불가)
2. PDF 파일 손상 여부 확인
3. 다른 PDF로 테스트

### 문제 3: 관련 내용을 찾지 못함

**증상**:
```
[검색 완료] 관련 페이지 0개 발견
```

**해결 방법**:
1. 주제의 키워드가 PDF 내용과 관련있는지 확인
2. `pdfService.ts`의 `additionalKeywords` 배열에 추가 키워드 등록
3. PDF 내용을 수동으로 확인하여 실제 관련 내용이 있는지 검증

### 문제 4: 출처 표기가 없음

**증상**: 생성된 콘텐츠에 "📚 참고 자료" 박스가 없음

**원인**: PDF 컨텍스트가 AI에 전달되지 않았거나, AI가 지침을 따르지 않음

**해결 방법**:
1. 콘솔에서 "PDF에서 XXX자의 관련 내용을 추출했습니다" 메시지 확인
2. 추출된 내용이 0자인 경우 위의 문제 2, 3 참고
3. 재생성 시도

---

## 📈 성능 최적화

### PDF 캐싱
- 첫 번째 로드 후 PDF 객체가 메모리에 캐시됨
- 같은 세션에서 다시 생성 시 빠른 응답

### 검색 최적화
- 관련성 점수 기반으로 상위 페이지만 추출
- 최대 3000자로 제한하여 AI 처리 속도 향상

---

## 🎯 테스트 체크리스트

- [ ] 탈모 관련 키워드 입력 시 파란색 알림 표시
- [ ] 콘솔에서 PDF 로드 로그 확인
- [ ] 콘솔에서 관련 페이지 검색 로그 확인
- [ ] 콘솔에서 최종 결과 (텍스트 길이, 페이지 번호) 확인
- [ ] 생성된 콘텐츠에 전문적인 내용 포함 확인
- [ ] 콘텐츠 하단에 출처 표기 확인
- [ ] 참조 페이지 번호 정확성 확인
- [ ] 일반 주제 입력 시 PDF 참조 없이 정상 작동 확인

---

## 📞 추가 지원

문제가 계속되면 다음 정보를 포함하여 문의:
1. 사용한 주제
2. 콘솔 로그 전체 내용
3. 브라우저 버전
4. book.pdf 파일 정보 (크기, 페이지 수)

